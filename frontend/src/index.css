:root{
  /* === Paleta cálida (claro) === */
  --bg:        #f3e0c7;       /* crema del fondo */
  --panel:     #ffffff;       /* tarjetas/controles */
  --text:      #2a2a2a;       /* texto principal */
  --muted:     #6b7280;       /* texto secundario */
  --border:    #e8e2d9;       /* borde suave */
  --ring:      rgba(139, 92, 246, .18); /* foco morado suave */

  --primary:   #e28543;       /* naranja botones principales */
  --accent:    #8b5cf6;       /* morado de acción secundaria */
  --danger:    #ef4444;

  --radius: 14px;
  --shadow: 0 12px 28px rgba(0,0,0,.12);
}

*{ box-sizing:border-box }
html,body,#root{ height:100% }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial;
  background: var(--bg);
  color: var(--text);
}

/* ===== Header base ===== */
header{
  background: linear-gradient(180deg, #fff, #faf6ee);
  border-bottom: 1px solid var(--border);
  backdrop-filter: blur(4px);
  box-shadow: 0 6px 16px rgba(0,0,0,.05);
}

/* ===== Header (paleta clara, sticky) ===== */
.appHeader,
.site-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:16px; padding:12px 16px;
  background: linear-gradient(180deg, #fff, #faf6ee);
  border-bottom: 1px solid var(--border);
  box-shadow: 0 6px 16px rgba(0,0,0,.05);
  position: sticky; top: 0; z-index: 100;
  color:#3a3a3a;
}

.header__brand,
.site-header__brand{
  color:#3a2a18; text-decoration:none; font-weight:800; font-size:18px;
}

.header__nav,
.site-header__nav{ display:flex; gap:12px; }
.header__nav a,
.site-header__nav a{
  color:#5b4a35; text-decoration:none; font-weight:600;
  padding:6px 10px; border-radius:8px;
  transition: background .2s ease, color .2s ease;
}
.header__nav a:hover,
.site-header__nav a:hover{ background:#f3e7d9; color:#2f2f2f; }
.site-header__nav a[aria-current="page"]{ background:#f0e2ce; color:#2b2b2b; }

.header__right,
.site-header__right{ display:flex; align-items:center; gap:12px; }

/* ===== Botones ===== */
button, .btn{
  background: var(--primary);
  color: #fff;
  border: none;
  font-weight: 700;
  padding: 10px 14px;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: var(--shadow);
  transition: transform .06s ease, filter .2s ease, opacity .2s ease;
}
button:hover, .btn:hover{ transform: translateY(-1px); filter: brightness(1.05); }
button:disabled, .btn:disabled{ opacity:.6; cursor:not-allowed }
.btn-primary{ background: var(--primary); color:#fff; }
.btn-accent { background: var(--accent);  color:#fff; }
.btn-outline-secondary{
  background: transparent;
  color: #444;
  border: 1px solid var(--border);
  box-shadow: none;
}

/* ===== Inputs ===== */
input, select, textarea{
  width: 100%;
  background: var(--panel);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 10px 12px;
  outline: none;
  box-shadow: 0 2px 0 rgba(0,0,0,.02) inset;
}
input::placeholder, textarea::placeholder{ color: #a3a3a3; }
input:focus, select:focus, textarea:focus{
  border-color: #d8cfc2;
  box-shadow: 0 0 0 4px var(--ring);
}

/* ===== Contenedor de imagen uniforme ===== */
.thumb{
  width: 100%;
  aspect-ratio: 16 / 10;
  overflow: hidden;
  border-bottom: 1px solid var(--border);
  background: #fff8ef;
  display: grid;
  place-items: center;
}
.thumb img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
}
.thumb .noimg{ color:#9aa0a6; font-size:.9rem; }
@media (max-width: 640px){ .thumb { aspect-ratio: 4 / 3; } }

/* ===== Card producto ===== */
.card{
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
}
.card .img{
  height: 180px;
  background: #fff8ef;
  display: grid;
  place-items:center;
  border-bottom: 1px solid var(--border);
}
.card .price{ color: var(--primary); font-weight: 800; }
.badge{
  display:inline-block;
  background: rgba(226,133,67,.12);
  color: var(--primary);
  border: 1px solid rgba(226,133,67,.35);
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 700;
}

/* ===== Grid catálogo ===== */
.grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 18px;
}

/* ===== Errores / hints ===== */
.form-error{ color: var(--danger); font-size: 13px; margin-top: 6px }
.hint{ color: var(--muted); font-size: 13px }

/* ===== Burbuja lateral (historia/contacto) ===== */
.lr{
  position: fixed;
  top: 96px; left: 0; z-index: 10;
}
.lr__toggle{
  position: absolute; left: 8px; top: 0;
  width: 44px; height: 44px; border-radius: 999px;
  display: grid; place-items: center;
  background: #f1e5d5; color: #7c5e3c;
  border: 1px solid #e0d6c6; box-shadow: 0 6px 18px rgba(154,120,80,.25);
  cursor: pointer; z-index: 2;
}
.lr--open .lr__toggle{ left: 292px; }
.lr__bubble{
  position: absolute; top: 0; left: 0; width: 320px;
  background: var(--panel); color: var(--text);
  border: 1px solid var(--border); border-radius: 16px;
  padding: 12px 14px 14px; box-shadow: var(--shadow);
  transform: translateX(calc(-100% + 60px));
  opacity: 0; pointer-events: none;
  transition: transform 240ms ease, opacity 200ms ease; z-index: 1;
}
.lr--open .lr__bubble{ transform: translateX(8px); opacity: 1; pointer-events: auto; }
.lr__imgWrap{ overflow: hidden; border-radius: 12px; margin-bottom: 10px; }
.lr__img{ display:block; width:100%; height:140px; object-fit:cover; background:#fff3e1; }
.lr__title{ font-size:.92rem; font-weight:800; color:#3a3a3a; margin-bottom:6px; }
.lr__text{ font-size:.92rem; color:var(--muted); margin:0 0 8px; }
.lr__divider{ border:none; border-top:1px solid var(--border); margin:8px 0 10px; }
.lr__link{ display:block; color:#4b5563; text-decoration:none; padding:2px 0; }
.lr__link:hover{ color:#111827; text-decoration: underline; }
@media (max-width: 992px){
  .lr{ top:84px; }
  .lr__bubble{ width:280px; }
  .lr--open .lr__toggle{ left:252px; }
}

/* ===== Modal de Perfil (tema claro suave) ===== */
.pmodal__backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.45);
  display:grid; place-items:center; z-index:2000;
}
.pmodal{
  width:min(880px, 92vw);
  background:#fff; color:var(--text);
  border:1px solid var(--border); border-radius:14px;
  box-shadow:0 24px 60px rgba(0,0,0,.18);
  overflow:hidden; animation:pop .15s ease-out;
}
@keyframes pop{ from{ transform:translateY(8px); opacity:0 } to{ transform:translateY(0); opacity:1 } }
.pmodal__header{
  display:flex; align-items:center; gap:.75rem;
  padding:1rem 1.25rem; border-bottom:1px solid var(--border);
  background:linear-gradient(180deg, #fff, #faf6ee);
}
.pmodal__brandPh{
  width:40px;height:40px;border-radius:8px;display:grid;place-items:center;
  background:#f5e8d8;color:#d08c52;font-weight:800;
}
.pmodal__title{ font-size:1.25rem; font-weight:800; margin:0; }
.pmodal__close{
  margin-left:auto; background:transparent; border:0; font-size:24px; line-height:1; cursor:pointer; color:#777;
}
.pmodal__body{ padding:1.25rem; }
.pmodal__avatarBox{ display:flex; align-items:center; gap:1rem; margin-bottom:1rem; }
.pmodal__avatar{
  width:72px; height:72px; border-radius:999px; overflow:hidden;
  box-shadow:0 6px 16px rgba(0,0,0,.1);
  border:1px solid var(--border);
  background:#fff3e1; display:grid; place-items:center;
}
.pmodal__avatar img{ width:100%; height:100%; object-fit:cover; }
.pmodal__avatarPh{ font-size:32px; color:#bbb; }
.pmodal__grid{ display:grid; grid-template-columns:1fr 1fr; gap:1rem; }
.pmodal__grid3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:.75rem; }
.form__grp{ display:flex; flex-direction:column; gap:.35rem; }
.form__grp label{ font-size:.9rem; color:#6b7280; }
.pmodal__save{ margin-top:.5rem; }
.pmodal__divider{ height:1px; background:var(--border); margin:1rem 0; }
.pmodal__subtitle{ margin:.25rem 0 .5rem; }
.pmodal__msg{ margin-top:.75rem; font-weight:600; color:#374151; }
@media (max-width: 920px){
  .pmodal__grid, .pmodal__grid3{ grid-template-columns:1fr; }
}

/* ===== Tipografía/contraste global ===== */
header a, header small{ color:#3a3a3a; text-decoration:none; font-weight:600; }
main, main p, main li, label, .hint{ color: var(--text); }
.hint{ color:#6b7280; }

main h1, main h2, .page-title{
  color:#7a4f29; text-shadow:0 1px 0 rgba(255,255,255,.4);
}

select, .filter select{ background:#fff; border:1px solid var(--border); color:#2a2a2a; }
.card h3, .card h4, .card .title{ color:#734a28; }
.card p, .card .desc, .card small, .card label{ color:#4b5563; }
.card button{ background:var(--primary); color:#fff; }
.card input, .card select, .card textarea{ border-color:#e6dccf; }
.badge{ border-color:rgba(226,133,67,.45); }
.card{ box-shadow:0 10px 24px rgba(0,0,0,.08); }
main{ padding-top:8px; }

/* ===================================================================== */
/* ================= FIX chip de usuario alineado una sola línea ======= */
/* ===================================================================== */

.site-header__right{
  display:flex;
  align-items:center;
  gap:12px;
  flex-wrap:nowrap;             /* no romper línea en desktop */
}

.site-header .avatarchip{
  display:inline-flex !important;    /* fila sí o sí */
  flex-direction:row !important;
  align-items:center !important;
  gap:.5rem !important;
  padding:4px 10px;
  border-radius:999px;
  background:#fff;
  border:1px solid var(--border);
  box-shadow:var(--shadow);
  cursor:pointer;
  user-select:none;
}
.site-header .avatarchip:focus{ outline:2px solid #8b5cf6; outline-offset:2px; }

.site-header .avatarchip__img{
  flex:0 0 28px;
  width:28px; height:28px; border-radius:50%; overflow:hidden;
  display:grid; place-items:center;
  background:#f5e8d8; border:1px solid #eadfce;
}
.site-header .avatarchip__img img{ width:100%; height:100%; object-fit:cover; }
.site-header .avatarchip__ph{ color:#d08c52; font-weight:800; font-size:.9rem; }
.site-header .avatarchip__label{
  display:inline-block !important;
  white-space:nowrap !important;     /* evita salto del saludo */
  line-height:1;
  color:#3a3a3a; font-weight:700; font-size:.95rem;
}

/* En móviles deja que rompa si no entra */
@media (max-width:560px){
  .site-header__right{ flex-wrap:wrap; gap:8px; }
}
/* Enlace de salto (se muestra al enfocar con Tab) */
.skip-link{
  position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skip-link:focus{
  left:16px; top:12px; width:auto; height:auto; background:#111; color:#fff;
  padding:8px 12px; border-radius:8px; z-index:2001;
}

/* Foco visible consistente */
a:focus-visible, button:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible{
  outline: 3px solid #8b5cf6;
  outline-offset: 2px;
}

/* Región viva oculta (para mensajes accesibles) */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* Respeta usuarios con “Reducir movimiento” */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:0.01ms !important; animation-iteration-count:1 !important; transition-duration:0.01ms !important; }
}
/* ===== Accesibilidad: enlace de salto ===== */
.skiplink{
  position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden;
}
.skiplink:focus{
  position:static; width:auto; height:auto; padding:6px 10px;
  background:#111; color:#fff; border-radius:8px; z-index:10000;
}

/* ===== Accesibilidad: foco visible coherente ===== */
:focus-visible{
  outline: 3px solid #8b5cf6;
  outline-offset: 2px;
}
.avatarchip:focus-visible{ outline: 3px solid #8b5cf6; outline-offset: 2px; }

/* ===== Botones deshabilitados con contraste suficiente ===== */
button:disabled, .btn:disabled{
  opacity: 0.7;
  filter: grayscale(0);            /* no apagar demasiado el contraste */
}

/* ===== Estados de error legibles ===== */
.form-error{
  color: #b91c1c;                  /* rojo accesible */
  font-weight: 600;
}

/* ===== Imágenes de avatar redondas sin deformar ===== */
.avatarchip__img img{ width:100%; height:100%; object-fit:cover; border-radius:50%; }
/* ====== Boleta / Recibos ====== */
.receipt-list { display: grid; gap: 16px; }

.receipt {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--panel);
  box-shadow: var(--shadow);
  overflow: hidden;
}

.receipt__header{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, #fff, #faf6ee);
}

.receipt__brand { font-weight: 900; font-size: 1.05rem; color: #7a4f29; }
.receipt__meta { font-size: .92rem; color: #4b5563; display: grid; gap: 2px; }

.receipt__right { display: grid; gap: 8px; justify-items: end; }
.receipt__actions { display: flex; gap: 8px; }

.receipt__body { padding: 14px 16px; }

.receipt__tableWrap { overflow-x: auto; }
.receipt__table {
  width: 100%;
  border-collapse: collapse;
}
.receipt__table th, .receipt__table td {
  border-bottom: 1px solid var(--border);
  padding: 8px 6px;
}
.receipt__table tfoot td { font-weight: 800; }

.receipt__delivery { margin-top: 12px; }
.receipt__delivery h4 { margin: 0 0 6px; color: #734a28; }
.receipt__delivery ul { margin: 0; padding-left: 1rem; color: #4b5563; }

.status-badge{
  display: inline-block;
  font-size: 12px;
  font-weight: 800;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid transparent;
  background: #eee;
  color: #333;
}
.status-badge.badge--created   { background: #eef2ff; border-color: #c7d2fe; color: #3730a3; }
.status-badge.badge--paid      { background: #ecfdf5; border-color: #a7f3d0; color: #065f46; }
.status-badge.badge--delivered { background: #f0fdf4; border-color: #bbf7d0; color: #166534; }
.status-badge.badge--cancelled { background: #fef2f2; border-color: #fecaca; color: #991b1b; }
/* ====== Admin ====== */
.admin-tabs { display:flex; gap:8px; margin:10px 0 14px; }
.admin-tab { border:1px solid var(--border); background:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; }
.admin-tab.is-active { background:#f3e7d9; font-weight:800; }

.table-wrap { overflow:auto; }
.admin-table { width:100%; border-collapse:collapse; }
.admin-table th, .admin-table td { border-bottom:1px solid var(--border); padding:8px 10px; text-align:left; }
.admin-actions { display:flex; justify-content:flex-end; gap:8px; margin-bottom:10px; }

.status-badge { display:inline-block; padding:2px 8px; border-radius:999px; border:1px solid var(--border); font-size:12px; font-weight:700; }
/* ===== Botón y tarjeta de accesibilidad (legible SIEMPRE) ===== */
.a11y-fab{
  position: fixed;
  right: 16px;          /* posición por defecto: abajo-derecha */
  bottom: 16px;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  font-size: 24px;
  line-height: 1;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(0,0,0,.28);
  background: var(--btn-bg, var(--primary));   /* ahora usa la marca por defecto */
  color: var(--btn-fg, #ffffff);
  z-index: 2000;
  transition: transform .06s ease, filter .2s ease;
}
.a11y-fab:hover{ transform: translateY(-1px); filter: brightness(1.06); }

/* Color de marca explícito (opcional; ya es el default, pero así puedes sobrescribir por tema) */
.a11y-fab.fab--brand{
  --btn-bg: var(--primary);
  --btn-fg: #fff;
}

/* Variante: abajo-derecha explícita (por si cambias de clase y quieres volver) */
.a11y-fab.fab--bottom-right{
  right: 16px;
  left: auto;
  bottom: 16px;
  top: auto;
  transform: none;
}

/* Variante: centrado abajo */
.a11y-fab.fab--bottom-center{
  left: 50%;
  right: auto;
  bottom: 16px;
  top: auto;
  transform: translateX(-50%);
}

/* Variante: mitad del lado derecho */
.a11y-fab.fab--mid-right{
  right: 16px;
  left: auto;
  top: 50%;
  bottom: auto;
  transform: translateY(-50%);
}

/* En móviles, si usas mid-right, bájalo al borde inferior para que no tape contenido */
@media (max-width: 640px){
  .a11y-fab.fab--mid-right{
    top: auto;
    bottom: 16px;
    transform: none;
  }
}

/* Alto contraste: aseguremos contraste del FAB */
:root[data-preset="high-contrast"] .a11y-fab{
  --btn-bg: #ffd900;   /* amarillo alto contraste */
  --btn-fg: #000000;
}

/* Contenedor que "anula" filtros globales en el panel */
.a11y-fixed, .a11y-fixed *{
  filter: none !important;
  mix-blend-mode: normal !important;
  -webkit-font-smoothing: antialiased;
}

.a11y-card{
  position: fixed;
  right: 16px;
  bottom: 76px;
  width: 280px;
  background: #ffffff !important;
  color: #111827 !important;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  padding: 12px;
  box-shadow: 0 14px 34px rgba(0,0,0,.28);
  z-index: 2100;
}
.a11y-title{ font-weight: 800; margin-bottom: 8px; color:#111827 !important; }
.a11y-list{ display: grid; gap: 8px; }

.a11y-item{
  width: 100%;
  text-align: left;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #d1d5db;
  background: #ffffff;
  color: #111827;
  font-weight: 600;
  cursor: pointer;
}
.a11y-item:hover{ background:#f9fafb; }
.a11y-item.is-active{
  outline: 2px solid #22c55e;
  background: #f0fdf4;
  box-shadow: inset 0 0 0 2px rgba(34,197,94,.1);
}
.a11y-footer{ display:flex; justify-content:flex-end; margin-top: 8px; }
.a11y-close{
  border: 1px solid #e5e7eb;
  background: #f5f5f5;
  padding: 8px 12px;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
}

/* Simulaciones de daltonismo (mantienes tus reglas) */
:root[data-preset="protanopia"]  body{ filter: url("#protanopia-matrix"); }
:root[data-preset="deuteranopia"] body{ filter: url("#deuteranopia-matrix"); }
:root[data-preset="tritanopia"]   body{ filter: url("#tritanopia-matrix"); }
